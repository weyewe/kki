
$.fn.clearForm = function() {
  return this.each(function() {
    var type = this.type, tag = this.tagName.toLowerCase();
    if (tag == 'form')
      return $(':input',this).clearForm();
    if (type == 'text' || type == 'password' || tag == 'textarea')
      this.value = '';
    else if (type == 'checkbox' || type == 'radio')
      this.checked = false;
    else if (tag == 'select')
      this.selectedIndex = -1;
  });
};


function summonModal(header_text, body_text, modal_id){
  var $modal_wrapper = $("#" + modal_id); 
  var $header = $(".modal-header h3", $modal_wrapper);
  var $body  = $(".modal-body p", $modal_wrapper);
  var $modal_closer = $(".modal-footer .modal-closer ", $modal_wrapper);
  // setting the header text
  $header.text( header_text );
  $body.text( body_text );
  
  $modal_wrapper.modal('show');
  
  $modal_closer.click(function(){
    // console.log("Oh yeah baby, closed");
    $modal_wrapper.modal('hide');
    return false;
  });
}

function summonModalHTML(header_html, body_html, modal_id){
  var $modal_wrapper = $("#" + modal_id); 
  var $header = $(".modal-header", $modal_wrapper);
  var $body  = $(".modal-body", $modal_wrapper);
  var $modal_closer = $(".modal-footer .modal-closer ", $modal_wrapper);
  // setting the header text
  $header.html( header_html );
  $body.html( body_html );
  
  $modal_wrapper.modal('show');
  
  $modal_closer.click(function(){
    // console.log("Oh yeah baby, closed");
    $modal_wrapper.modal('hide');
    return false;
  });
}

// function summonAlertModal(header_html, body_html, modal_id, row_id ){
//   
//   
//   var $modalExe = $("#modal_exe");
//   $modalExe.click(function(){
//     // trigger the AJAX. Destination is in the form for deduction
//   });
// }






function reverseCheckbox( checkbox_id ){
  var $checkbox = $("#" + checkbox_id );
  
  if(   $checkbox.is(":checked")  ) {
     $checkbox.attr('value', <%= FALSE_CHECK %>);
     $checkbox.attr('checked', false);
   }else{
     $checkbox.attr( 'value', <%= TRUE_CHECK %> );
     $checkbox.attr('checked', true);
   }
}

function fillCheckbox( checkbox_id, value  ){
  var $checkbox = $("#" + checkbox_id );
  
  if( value == 1 ) {
    // true  
    $checkbox.attr('value', <%= TRUE_CHECK %>);
    $checkbox.attr('checked', true );
  }else if( value == 0 ){
    //false 
    $checkbox.attr('value', <%= FALSE_CHECK %>);
    $checkbox.attr('checked', false );
  }
}

function newParseInt( value ){
  var result = parseInt( value );
  if( isNaN(result)){
    return 0;
  }else{
    return result; 
  }
}

function addCommas(nStr)
{
	nStr += '';
	x = nStr.split('.');
	x1 = x[0];
	x2 = x.length > 1 ? '.' + x[1] : '';
	var rgx = /(\d+)(\d{3})/;
	while (rgx.test(x1)) {
		x1 = x1.replace(rgx, '$1' + ',' + '$2');
	}
	return x1 + x2;
}



jQuery.fn.preventDoubleSubmit = function() {
  jQuery(this).submit(function() {
    if (this.beenSubmitted)
      return false;
    else
      this.beenSubmitted = true;
  });
};

